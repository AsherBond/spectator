



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="http://netflix.github.io/spectator/ext/jvm-gc/">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0, mkdocs-material-3.0.3">
    
    
      
        <title>Garbage Collection - Spectator Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.451f80e5.css">
      
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../../css/custom.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="../../#garbage-collection" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="http://netflix.github.io/spectator" title="Spectator Docs" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                Spectator Docs
              </span>
              <span class="md-header-nav__topic">
                Garbage Collection
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/Netflix/spectator/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="http://netflix.github.io/spectator" title="Spectator Docs" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Spectator Docs
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/Netflix/spectator/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Getting Started
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Getting Started
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../intro/registry/" title="Registry" class="md-nav__link">
      Registry
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Meter Types
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Meter Types
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../intro/counter/" title="Counters" class="md-nav__link">
      Counters
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../intro/timer/" title="Timers" class="md-nav__link">
      Timers
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../intro/gauge/" title="Gauges" class="md-nav__link">
      Gauges
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../intro/dist-summary/" title="Distribution Summaries" class="md-nav__link">
      Distribution Summaries
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../intro/clock/" title="Clock" class="md-nav__link">
      Clock
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../intro/conventions/" title="Naming Conventions" class="md-nav__link">
      Naming Conventions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../intro/testing/" title="Testing" class="md-nav__link">
      Testing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../intro/netflix/" title="Netflix Integration" class="md-nav__link">
      Netflix Integration
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../intro/servo-comparison/" title="Servo Comparison" class="md-nav__link">
      Servo Comparison
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" checked>
    
    <label class="md-nav__link" for="nav-3">
      Extensions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        Extensions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../ipc/" title="IPC" class="md-nav__link">
      IPC
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3-2" type="checkbox" id="nav-3-2" checked>
    
    <label class="md-nav__link" for="nav-3-2">
      JVM Stats
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-3-2">
        JVM Stats
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../jvm-buffer-pools/" title="Buffer Pools" class="md-nav__link">
      Buffer Pools
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Garbage Collection
      </label>
    
    <a href="./" title="Garbage Collection" class="md-nav__link md-nav__link--active">
      Garbage Collection
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started" title="Getting Started" class="md-nav__link">
    Getting Started
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements" title="Requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dependencies" title="Dependencies" class="md-nav__link">
    Dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-reporting" title="Start Reporting" class="md-nav__link">
    Start Reporting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging" title="Logging" class="md-nav__link">
    Logging
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics" title="Metrics" class="md-nav__link">
    Metrics
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jvmgcallocationrate" title="jvm.gc.allocationRate" class="md-nav__link">
    jvm.gc.allocationRate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jvmgcpromotionrate" title="jvm.gc.promotionRate" class="md-nav__link">
    jvm.gc.promotionRate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jvmgclivedatasize" title="jvm.gc.liveDataSize" class="md-nav__link">
    jvm.gc.liveDataSize
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jvmgcmaxdatasize" title="jvm.gc.maxDataSize" class="md-nav__link">
    jvm.gc.maxDataSize
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jvmgcpause" title="jvm.gc.pause" class="md-nav__link">
    jvm.gc.pause
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jvmgcconcurrentphasetime" title="jvm.gc.concurrentPhaseTime" class="md-nav__link">
    jvm.gc.concurrentPhaseTime
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alerting" title="Alerting" class="md-nav__link">
    Alerting
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#max-pause-time" title="Max Pause Time" class="md-nav__link">
    Max Pause Time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#heap-pressure" title="Heap Pressure" class="md-nav__link">
    Heap Pressure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../jvm-gc-causes/" title="GC Causes" class="md-nav__link">
      GC Causes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../jvm-memory-pools/" title="Memory Pools" class="md-nav__link">
      Memory Pools
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../thread-pools/" title="Thread Pools" class="md-nav__link">
      Thread Pools
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../log4j2/" title="Log4j2 Appender" class="md-nav__link">
      Log4j2 Appender
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../log4j1/" title="Log4j1 Appender" class="md-nav__link">
      Log4j1 Appender
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../placeholders/" title="Placeholders" class="md-nav__link">
      Placeholders
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      Registries
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Registries
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../registry/metrics3/" title="Metrics3" class="md-nav__link">
      Metrics3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../registry/servo/" title="Servo" class="md-nav__link">
      Servo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#getting-started" title="Getting Started" class="md-nav__link">
    Getting Started
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements" title="Requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dependencies" title="Dependencies" class="md-nav__link">
    Dependencies
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start-reporting" title="Start Reporting" class="md-nav__link">
    Start Reporting
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#logging" title="Logging" class="md-nav__link">
    Logging
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics" title="Metrics" class="md-nav__link">
    Metrics
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jvmgcallocationrate" title="jvm.gc.allocationRate" class="md-nav__link">
    jvm.gc.allocationRate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jvmgcpromotionrate" title="jvm.gc.promotionRate" class="md-nav__link">
    jvm.gc.promotionRate
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jvmgclivedatasize" title="jvm.gc.liveDataSize" class="md-nav__link">
    jvm.gc.liveDataSize
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jvmgcmaxdatasize" title="jvm.gc.maxDataSize" class="md-nav__link">
    jvm.gc.maxDataSize
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jvmgcpause" title="jvm.gc.pause" class="md-nav__link">
    jvm.gc.pause
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#jvmgcconcurrentphasetime" title="jvm.gc.concurrentPhaseTime" class="md-nav__link">
    jvm.gc.concurrentPhaseTime
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alerting" title="Alerting" class="md-nav__link">
    Alerting
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#max-pause-time" title="Max Pause Time" class="md-nav__link">
    Max Pause Time
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#heap-pressure" title="Heap Pressure" class="md-nav__link">
    Heap Pressure
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/Netflix/spectator/edit/master/docs/ext/jvm-gc.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="garbage-collection">Garbage Collection<a class="headerlink" href="#garbage-collection" title="Permanent link">&para;</a></h1>
<p>The GC module registers with the notification emitter of the
<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/management/GarbageCollectorMXBean.html">GarbageCollectorMXBean</a>
to provide some basic GC logging and metrics.</p>
<ul>
<li><a href="#getting-started">Getting started</a></li>
<li><a href="#logging">Logging</a></li>
<li><a href="#metrics">Metrics</a></li>
<li><a href="#alerting">Alerting</a></li>
</ul>
<h2 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h2>
<p>For using it internally at Netflix see the <a href="../../intro/netflix/">Netflix integration</a> guide,
otherwise keep reading this section.</p>
<h3 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h3>
<p>This library relies on the notification emitter added in 7u4, but there are known issues prior
to 7u40. There is also a regression impacting java 9 and higher, see <a href="https://github.com/Netflix/spectator/issues/502">#502</a> and <a href="https://bugs.openjdk.java.net/browse/JDK-8196325">JDK-8196325</a>
for more information. For G1 it is recommended to be on the latest version available.</p>
<h3 id="dependencies">Dependencies<a class="headerlink" href="#dependencies" title="Permanent link">&para;</a></h3>
<div class="codehilite"><pre><span></span>com.netflix.spectator:spectator-ext-gc:0.85.0
</pre></div>


<h3 id="start-reporting">Start Reporting<a class="headerlink" href="#start-reporting" title="Permanent link">&para;</a></h3>
<p>Then in the initialization for the application:</p>
<div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">com.netflix.spectator.gc.GcLogger</span><span class="o">;</span>
<span class="o">...</span>
<span class="c1">// Keep a single instance of the logger</span>
<span class="n">GcLogger</span> <span class="n">gc</span> <span class="o">=</span> <span class="k">new</span> <span class="n">GcLogger</span><span class="o">();</span>
<span class="n">gc</span><span class="o">.</span><span class="na">start</span><span class="o">(</span><span class="kc">null</span><span class="o">);</span>
</pre></div>


<h2 id="logging">Logging<a class="headerlink" href="#logging" title="Permanent link">&para;</a></h2>
<p>After GC events an INFO level log message will get reported using slf4j. This makes it easy to
GC events in the context of other log messages for the application. The logger name is
<code>com.netflix.spectator.gc.GcLogger</code> and the message will look like:</p>
<div class="codehilite"><pre><span></span><span class="cp">${</span><span class="n">GC_TYPE</span><span class="cp">}</span>: <span class="cp">${</span><span class="n">COLLECTOR_NAME</span><span class="cp">}</span>, id=<span class="cp">${</span><span class="n">N</span><span class="cp">}</span>, at=<span class="cp">${</span><span class="n">START_TIME</span><span class="cp">}</span>, duration=<span class="cp">${</span><span class="n">T</span><span class="cp">}</span>ms, cause=[<span class="cp">${</span><span class="n">CAUSE</span><span class="cp">}</span>], <span class="cp">${</span><span class="n">TOTAL_USAGE_BEFORE</span><span class="cp">}</span> =&gt; <span class="cp">${</span><span class="n">TOTAL_USAGE_AFTER</span><span class="cp">}</span> / <span class="cp">${</span><span class="n">MAX_SIZE</span><span class="cp">}</span> (<span class="cp">${</span><span class="n">PERCENT_USAGE_BEFORE</span><span class="cp">}</span> =&gt; <span class="cp">${</span><span class="n">PERCENT_USAGE_AFTER</span><span class="cp">}</span>)
</pre></div>


<p>The id can be used to verify events were not skipped or correlate with other sources like
detailed GC logs. See <a href="../jvm-gc-causes/">GC causes</a> for more details on the possible causes.</p>
<p>Sample:</p>
<div class="codehilite"><pre><span></span><span class="mi">2014</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">31</span> <span class="mo">02</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mi">24</span><span class="p">,</span><span class="mi">724</span>  <span class="n">INFO</span> <span class="p">[</span><span class="n">com</span><span class="p">.</span><span class="n">netflix</span><span class="p">.</span><span class="n">spectator</span><span class="p">.</span><span class="n">gc</span><span class="p">.</span><span class="n">GcLogger</span><span class="p">]</span> <span class="nl">YOUNG</span><span class="p">:</span> <span class="n">ParNew</span><span class="p">,</span> <span class="kt">id</span><span class="o">=</span><span class="mi">5281</span><span class="p">,</span> <span class="n">at</span><span class="o">=</span><span class="n">Sun</span> <span class="n">Aug</span> <span class="mi">31</span> <span class="mo">02</span><span class="o">:</span><span class="mo">02</span><span class="o">:</span><span class="mi">24</span> <span class="n">UTC</span> <span class="mi">2014</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">2</span><span class="n">ms</span><span class="p">,</span> <span class="n">cause</span><span class="o">=</span><span class="p">[</span><span class="n">Allocation</span> <span class="n">Failure</span><span class="p">],</span> <span class="mf">0.4</span><span class="n">G</span> <span class="o">=&gt;</span> <span class="mf">0.3</span><span class="n">G</span> <span class="o">/</span> <span class="mf">1.8</span><span class="n">G</span> <span class="p">(</span><span class="mf">24.3</span><span class="o">%</span> <span class="o">=&gt;</span> <span class="mf">16.6</span><span class="o">%</span><span class="p">)</span>
</pre></div>


<h2 id="metrics">Metrics<a class="headerlink" href="#metrics" title="Permanent link">&para;</a></h2>
<h3 id="jvmgcallocationrate">jvm.gc.allocationRate<a class="headerlink" href="#jvmgcallocationrate" title="Permanent link">&para;</a></h3>
<p>The allocation rate measures how fast the application is allocating memory. It is a counter
that is incremented after a GC event by the amount <code>youngGen.sizeBeforeGC</code>. Technically, right
now it is:</p>
<p><code>youngGen.sizeBeforeGC - youngGen.sizeAfterGC</code></p>
<p>However, <code>youngGen.sizeAfterGC</code> should be 0 and thus the size of young gen before the GC is
the amount allocated since the previous GC event.</p>
<p><strong>Unit:</strong> bytes/second</p>
<p><strong>Dimensions:</strong> n/a</p>
<h3 id="jvmgcpromotionrate">jvm.gc.promotionRate<a class="headerlink" href="#jvmgcpromotionrate" title="Permanent link">&para;</a></h3>
<p>The promotion rate measures how fast data is being moved from young generation into the old
generation. It is a counter that is incremented after a GC event by the amount:</p>
<p><code>abs(oldGen.sizeAfterGC - oldGen.sizeBeforeGC)</code></p>
<p><strong>Unit:</strong> bytes/second</p>
<p><strong>Dimensions:</strong> n/a</p>
<h3 id="jvmgclivedatasize">jvm.gc.liveDataSize<a class="headerlink" href="#jvmgclivedatasize" title="Permanent link">&para;</a></h3>
<p>The live data size is the size of the old generation after a major GC. The image below shows
how the live data size view compares to a metric showing the current size of the memory pool:</p>
<p><img alt="Live Data Size" src="../../images/live_data_size.png" /></p>
<p><strong>Unit:</strong> bytes</p>
<p><strong>Dimensions:</strong> n/a</p>
<h3 id="jvmgcmaxdatasize">jvm.gc.maxDataSize<a class="headerlink" href="#jvmgcmaxdatasize" title="Permanent link">&para;</a></h3>
<p>Maximum size for the old generation. Primary use-case is for gaining perspective on the the
live data size.</p>
<p><strong>Unit:</strong> bytes</p>
<p><strong>Dimensions:</strong> n/a</p>
<h3 id="jvmgcpause">jvm.gc.pause<a class="headerlink" href="#jvmgcpause" title="Permanent link">&para;</a></h3>
<p>Timer reporting the pause time for a GC event. All of the values reported are stop the world
pauses.</p>
<p><strong>Unit:</strong></p>
<ul>
<li><code>statistic=max</code>: seconds</li>
<li><code>statistic=count</code>: events/second</li>
<li><code>statistic=totalTime</code>: seconds/second</li>
</ul>
<p><strong>Dimensions:</strong></p>
<ul>
<li><code>action</code>: action performed by the garbage collector
   (<a href="http://docs.oracle.com/javase/7/docs/jre/api/management/extension/com/sun/management/GarbageCollectionNotificationInfo.html#getGcAction()">javadoc</a>).
   There is no guarantee, but the typical values seen are <code>end_of_major_GC</code> and <code>end_of_minor_GC</code>.</li>
<li><code>cause</code>: cause that instigated GC (<a href="http://docs.oracle.com/javase/7/docs/jre/api/management/extension/com/sun/management/GarbageCollectionNotificationInfo.html#getGcCause()">javadoc</a>).
  For an explanation of common causes see the <a href="../jvm-gc-causes/">GC causes</a> page.</li>
</ul>
<h3 id="jvmgcconcurrentphasetime">jvm.gc.concurrentPhaseTime<a class="headerlink" href="#jvmgcconcurrentphasetime" title="Permanent link">&para;</a></h3>
<p>Timer reporting time spent in concurrent phases of CMS.
pauses.</p>
<p><strong>Unit:</strong></p>
<ul>
<li><code>statistic=max</code>: seconds</li>
<li><code>statistic=count</code>: events/second</li>
<li><code>statistic=totalTime</code>: seconds/second</li>
</ul>
<p><strong>Dimensions:</strong></p>
<ul>
<li><code>action</code>: action performed by the garbage collector
  (<a href="http://docs.oracle.com/javase/7/docs/jre/api/management/extension/com/sun/management/GarbageCollectionNotificationInfo.html#getGcAction()">javadoc</a>).
  There is no guarantee, but the typical values seen are <code>end_of_major_GC</code> and <code>end_of_minor_GC</code>.</li>
<li><code>cause</code>: cause that instigated GC (<a href="http://docs.oracle.com/javase/7/docs/jre/api/management/extension/com/sun/management/GarbageCollectionNotificationInfo.html#getGcCause()">javadoc</a>).
  For an explanation of common causes see the <a href="../jvm-gc-causes/">GC causes</a> page.</li>
</ul>
<h2 id="alerting">Alerting<a class="headerlink" href="#alerting" title="Permanent link">&para;</a></h2>
<p>This section assumes the data is available in <a href="https://github.com/Netflix/atlas/wiki/">Atlas</a>,
but users of other systems should be able to take the idea and make it work. For all of these
alerts it is recommended to check them on instance. At Netflix that can be done by selecting
the option in alert ui:</p>
<blockquote>
<p><img alt="On Instance Alerting" src="../../images/on_instance.png" /></p>
</blockquote>
<h3 id="max-pause-time">Max Pause Time<a class="headerlink" href="#max-pause-time" title="Permanent link">&para;</a></h3>
<p>Example to trigger an alert if the <a href="#jvmgcpause">pause time</a> exceeds 500 milliseconds:</p>
<div class="codehilite"><pre><span></span>name,jvm.gc.pause,:eq,
statistic,max,:eq,
:and,
:max,(,cause,),:by,
0.5,:gt,
$cause,:legend
</pre></div>


<h3 id="heap-pressure">Heap Pressure<a class="headerlink" href="#heap-pressure" title="Permanent link">&para;</a></h3>
<p>Example to trigger an alert if the <a href="#jvmgclivedatasize">live data size</a> is over 70% of the heap:</p>
<div class="codehilite"><pre><span></span>name,jvm.gc.liveDataSize,:eq,:max,
name,jvm.gc.maxDataSize,:eq,:max,
:div,100,:mul,
70,:gt,
percentUsed,:legend
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../jvm-buffer-pools/" title="Buffer Pools" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Buffer Pools
              </span>
            </div>
          </a>
        
        
          <a href="../jvm-gc-causes/" title="GC Causes" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                GC Causes
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.583bbe55.js"></script>
      
      <script>app.initialize({version:"1.0",url:{base:"../.."}})</script>
      
    
    
      
        <script>!function(e,a,t,n,o,c,i){e.GoogleAnalyticsObject=o,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),i=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",i.parentNode.insertBefore(c,i)}(window,document,"script",0,"ga"),ga("create","UA-82153845-2","auto"),ga("set","anonymizeIp",!0),ga("send","pageview");var links=document.getElementsByTagName("a");if(Array.prototype.map.call(links,function(e){e.host!=document.location.host&&e.addEventListener("click",function(){var a=e.getAttribute("data-md-action")||"follow";ga("send","event","outbound",a,e.href)})}),document.forms.search){var query=document.forms.search.query;query.addEventListener("blur",function(){if(this.value){var e=document.location.pathname;ga("send","pageview",e+"?q="+this.value)}})}</script>
      
    
  </body>
</html>