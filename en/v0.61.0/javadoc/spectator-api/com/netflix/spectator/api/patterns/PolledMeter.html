<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_131) on Mon Jan 29 07:22:21 PST 2018 -->
<title>PolledMeter (Spectator)</title>
<meta name="date" content="2018-01-29">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="PolledMeter (Spectator)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":41,"i1":9,"i2":9,"i3":9};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],8:["t4","Concrete Methods"],32:["t6","Deprecated Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/netflix/spectator/api/patterns/LongTaskTimer.html" title="class in com.netflix.spectator.api.patterns"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/netflix/spectator/api/patterns/PolledMeter.Builder.html" title="class in com.netflix.spectator.api.patterns"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/netflix/spectator/api/patterns/PolledMeter.html" target="_top">Frames</a></li>
<li><a href="PolledMeter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.netflix.spectator.api.patterns</div>
<h2 title="Class PolledMeter" class="title">Class PolledMeter</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.netflix.spectator.api.patterns.PolledMeter</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public final class <span class="typeNameLabel">PolledMeter</span>
extends java.lang.Object</pre>
<div class="block">Helper for configuring a meter that will receive a value by regularly polling the
 source in the background.

 <p>Example usage:</p>

 <pre>
   Registry registry = ...
   AtomicLong connections = PolledMeter.using(registry)
     .withName("server.currentConnections")
     .monitorValue(new AtomicLong());

   // When a connection is added
   connections.incrementAndGet();

   // When a connection is removed
   connections.decrementAndGet();
 </pre>

 <p>Polling frequency will depend on the underlying registry implementation, but users should
 assume it will be frequently checked and that the provided function is cheap. Users should
 keep in mind that polling will not capture all activity, just sample it at some frequency.
 For example, if monitoring a queue, then a meter will only tell you the last sampled size
 when the value is reported. If more details are needed, then use an alternative type
 and ensure that all changes are reported when they occur.</p>

 <p>For example, consider tracking the number of currently established connections to a server.
 Using a polled meter will show the last sampled number when reported. An alternative would
 be to report the number of connections to a <a href="../../../../../com/netflix/spectator/api/DistributionSummary.html" title="interface in com.netflix.spectator.api"><code>DistributionSummary</code></a>
 every time a connection is added or removed. The distribution summary would provide more
 accurate tracking such as max and average number of connections across an interval of time.
 The polled meter would not provide that level of detail.</p>

 <p>If multiple values are monitored with the same id, then the values will be aggregated and
 the sum will be reported. For example, registering multiple meters for active threads in
 a thread pool with the same id would produce a value that is the overall number
 of active threads. For other behaviors, manage it on the user side and avoid multiple
 registrations.</p></div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/netflix/spectator/api/patterns/PolledMeter.Builder.html" title="class in com.netflix.spectator.api.patterns">PolledMeter.Builder</a></span></code>
<div class="block">Builder for configuring a polled meter value.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t6" class="tableTab"><span><a href="javascript:show(32);">Deprecated Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/netflix/spectator/api/patterns/PolledMeter.html#monitorMeter-com.netflix.spectator.api.Registry-com.netflix.spectator.api.Meter-">monitorMeter</a></span>(<a href="../../../../../com/netflix/spectator/api/Registry.html" title="interface in com.netflix.spectator.api">Registry</a>&nbsp;registry,
            <a href="../../../../../com/netflix/spectator/api/Meter.html" title="interface in com.netflix.spectator.api">Meter</a>&nbsp;meter)</code>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;
<div class="block"><span class="deprecationComment">This method only exists to allow for backwards compatibility and should
 be considered an internal detail. Scheduled to be removed in 2.0.</span></div>
</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/netflix/spectator/api/patterns/PolledMeter.html#remove-com.netflix.spectator.api.Registry-com.netflix.spectator.api.Id-">remove</a></span>(<a href="../../../../../com/netflix/spectator/api/Registry.html" title="interface in com.netflix.spectator.api">Registry</a>&nbsp;registry,
      <a href="../../../../../com/netflix/spectator/api/Id.html" title="interface in com.netflix.spectator.api">Id</a>&nbsp;id)</code>
<div class="block">Explicitly disable polling for the meter registered with <code>id</code>.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/netflix/spectator/api/patterns/PolledMeter.html#update-com.netflix.spectator.api.Registry-">update</a></span>(<a href="../../../../../com/netflix/spectator/api/Registry.html" title="interface in com.netflix.spectator.api">Registry</a>&nbsp;registry)</code>
<div class="block">Force the polling of all meters associated with the registry.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>static <a href="../../../../../com/netflix/spectator/api/patterns/IdBuilder.html" title="class in com.netflix.spectator.api.patterns">IdBuilder</a>&lt;<a href="../../../../../com/netflix/spectator/api/patterns/PolledMeter.Builder.html" title="class in com.netflix.spectator.api.patterns">PolledMeter.Builder</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../../com/netflix/spectator/api/patterns/PolledMeter.html#using-com.netflix.spectator.api.Registry-">using</a></span>(<a href="../../../../../com/netflix/spectator/api/Registry.html" title="interface in com.netflix.spectator.api">Registry</a>&nbsp;registry)</code>
<div class="block">Return a builder for configuring a polled meter reporting to the provided registry.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="using-com.netflix.spectator.api.Registry-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>using</h4>
<pre>public static&nbsp;<a href="../../../../../com/netflix/spectator/api/patterns/IdBuilder.html" title="class in com.netflix.spectator.api.patterns">IdBuilder</a>&lt;<a href="../../../../../com/netflix/spectator/api/patterns/PolledMeter.Builder.html" title="class in com.netflix.spectator.api.patterns">PolledMeter.Builder</a>&gt;&nbsp;using(<a href="../../../../../com/netflix/spectator/api/Registry.html" title="interface in com.netflix.spectator.api">Registry</a>&nbsp;registry)</pre>
<div class="block">Return a builder for configuring a polled meter reporting to the provided registry.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>registry</code> - Registry that will maintain the state and receive the sampled values for the
     configured meter.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>Builder for configuring a polled meter.</dd>
</dl>
</li>
</ul>
<a name="update-com.netflix.spectator.api.Registry-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre>public static&nbsp;void&nbsp;update(<a href="../../../../../com/netflix/spectator/api/Registry.html" title="interface in com.netflix.spectator.api">Registry</a>&nbsp;registry)</pre>
<div class="block">Force the polling of all meters associated with the registry.</div>
</li>
</ul>
<a name="remove-com.netflix.spectator.api.Registry-com.netflix.spectator.api.Id-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre>public static&nbsp;void&nbsp;remove(<a href="../../../../../com/netflix/spectator/api/Registry.html" title="interface in com.netflix.spectator.api">Registry</a>&nbsp;registry,
                          <a href="../../../../../com/netflix/spectator/api/Id.html" title="interface in com.netflix.spectator.api">Id</a>&nbsp;id)</pre>
<div class="block">Explicitly disable polling for the meter registered with <code>id</code>. This is optional
 and is mostly used if it is desirable for the meter to go away immediately. The polling
 will stop automatically when the referred object is garbage collected. See
 <a href="../../../../../com/netflix/spectator/api/patterns/PolledMeter.Builder.html#monitorValue-T-java.util.function.ToDoubleFunction-"><code>PolledMeter.Builder.monitorValue(Object, ToDoubleFunction)</code></a> for more information.</div>
</li>
</ul>
<a name="monitorMeter-com.netflix.spectator.api.Registry-com.netflix.spectator.api.Meter-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>monitorMeter</h4>
<pre>@Deprecated
public static&nbsp;void&nbsp;monitorMeter(<a href="../../../../../com/netflix/spectator/api/Registry.html" title="interface in com.netflix.spectator.api">Registry</a>&nbsp;registry,
                                            <a href="../../../../../com/netflix/spectator/api/Meter.html" title="interface in com.netflix.spectator.api">Meter</a>&nbsp;meter)</pre>
<div class="block"><span class="deprecatedLabel">Deprecated.</span>&nbsp;<span class="deprecationComment">This method only exists to allow for backwards compatibility and should
 be considered an internal detail. Scheduled to be removed in 2.0.</span></div>
<div class="block">Provided for backwards compatibility to support the <a href="../../../../../com/netflix/spectator/api/Registry.html#register-com.netflix.spectator.api.Meter-"><code>Registry.register(Meter)</code></a>
 method. Use the builder created with <a href="../../../../../com/netflix/spectator/api/patterns/PolledMeter.html#using-com.netflix.spectator.api.Registry-"><code>using(Registry)</code></a> instead.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/netflix/spectator/api/patterns/LongTaskTimer.html" title="class in com.netflix.spectator.api.patterns"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../../com/netflix/spectator/api/patterns/PolledMeter.Builder.html" title="class in com.netflix.spectator.api.patterns"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/netflix/spectator/api/patterns/PolledMeter.html" target="_top">Frames</a></li>
<li><a href="PolledMeter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
